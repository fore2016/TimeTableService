package com.yg.timetableservice.rxjava;


import com.alibaba.fastjson.JSONArray;
import rx.functions.Func1;

import java.util.Calendar;
import java.util.Collections;

public class GetPageMapper implements Func1<JSONArray, JSONArray> {
    private int page;
    @Override
    public JSONArray call(JSONArray allturns) {
        Collections.sort(allturns, ((o1, o2) -> {
            Calendar time1 = (Calendar)((JSONArray)o1).get(1);
            Calendar time2 = (Calendar)((JSONArray)o2).get(1);
            if (time1.after(time2))
                return 1;
            else if(time1.before(time2))
                return -1;
            else return 0;
        }));
        JSONArray result = new JSONArray();
        for (int i = 0; i < page && i < allturns.size(); i++)
            result.add(allturns.get(i));
        return result;
    }
    public GetPageMapper(int page) {
        this.page = page;
    }
}
